<body class="d-flex align-items-top">
  <div *ngIf="notification"
    [ngClass]="{'success': notification.type === 'success', 'error': notification.type === 'error'}"
    class="notification">
    {{ notification.message }}
  </div>

  <div class="container-fluid">
    <div class="row d-flex justify-content-center">
      <div class="col-12 col-sm-12 col-md-12 col-lg-12 main-login p-0">
        <div class="container-fluid">
          <div class="row top-login align-items-center justify-content-center">
            <div class="col-6 d-flex align-items-center justify-content-center p-2 p-md-2 p-lg-2 p-xl-3">
              <h1>Login</h1>
            </div>
          </div>
        </div>
        <div class="container-fluid">
          <div class="mt-2">
            <div class="col-6 d-flex align-items-center justify-content-start">
              <button (click)="goToMain()" class="arrow-button col-12 px-0 d-flex">
                <mat-icon class="col-4 custom-arrow-icon" aria-hidden="false" aria-label="Arrow back icon"
                  fontIcon="arrow_back"></mat-icon>
                <div class="col-5 justify-content-start align-items-center d-flex" style="margin-left: 10px;">
                  <h3 class="back-text mb-0">VOLTAR</h3>
                </div>
              </button>
            </div>
          </div>
          <div class="mt-3">
            <h2>Acessar</h2>
          </div>
          <div class="mt-3">
            <h3 class="mx-1">Com email e senha para entrar</h3>
          </div>
          <form [formGroup]="loginUser">
            <div class="mt-5">
              <h4 class="col-12 mx-1 mb-1">Digite seu email</h4>
              <mat-form-field class="col-12 mt-1">
                <mat-label>Email</mat-label>
                <input matInput type="email" maxlength="254" formControlName="email" placeholder="email@email.com">
                <mat-error *ngIf="loginUser.get('email')?.hasError('required')">
                  O email é obrigatório.
                </mat-error>
                <mat-error *ngIf="loginUser.get('email')?.hasError('maxlength')">
                  O email não pode exceder 254 caracteres.
                </mat-error>
                <mat-error *ngIf="loginUser.get('email')?.hasError('email')">
                  O email não é válido.
                </mat-error>
              </mat-form-field>
            </div>
            <div class="mt-3">
              <h4 class="col-12 mx-1 mb-1">Digite sua senha</h4>
              <mat-form-field class="col-12 mt-1 custom-form-field">
                <mat-label>Senha</mat-label>
                <input matInput [type]="showPassword ? 'text' : 'password'" formControlName="password" maxlength="128"
                  minlength="8" placeholder="password">
                <mat-error *ngIf="loginUser.get('password')?.hasError('required')">
                  A senha é obrigatória.
                </mat-error>
                <mat-error *ngIf="loginUser.get('password')?.hasError('minlength')">
                  A senha deve ter pelo menos 8 caracteres.
                </mat-error>
                <mat-error *ngIf="loginUser.get('password')?.hasError('maxlength')">
                  A senha não pode exceder 128 caracteres.
                </mat-error>
                <mat-error *ngIf="loginUser.get('password')?.hasError('passwordStrength')">
                  Letra maiúscula, um número e um caractere especial.
                </mat-error>
                <button mat-icon-button matSuffix type="button" (click)="togglePasswordVisibility()"
                  aria-label="Toggle password visibility">
                  <mat-icon>{{ showPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>
              </mat-form-field>
            </div>
            <div class="d-flex align-items-center justify-content-between mt-3 gap-4 me-3">
              <mat-checkbox formControlName="rememberMe" class="remember-checkbox">Lembrar minha senha</mat-checkbox>
              <a (click)="goToMain()" class="forgot-password-link">Esqueci minha senha</a>
            </div>
            <div class="d-flex align-items-center justify-content-between mt-3 gap-4 ">
              <button type="button" (click)="goToRegiser()" id="login-register-btn">Cadastrar</button>
              <button type="submit" (click)="login()" id="login-register-btn"
                [disabled]="loginUser.invalid || loggingIn">Acessar</button>
            </div>
          </form>
          <div class="mt-5 d-flex align-items-center justify-content-evenly gap-3">
            <div class="line"></div>
            <p class="alternative-text justify-content-center m-0">ou acesse com</p>
            <div class="line"></div>
          </div>
          <div class="my-4 align-items-center justify-content-center d-flex">
            <img (click)="goToMain()" src="../../assets/icons/sigaa.svg" alt="SIGAA Logo" class="sigaa-logo" />
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
